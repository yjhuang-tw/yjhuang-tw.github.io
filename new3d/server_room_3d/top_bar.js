let chartRackSpace,chartPower;function SearchBoxInit(){const e=new XMLHttpRequest;e.onload=function(){var t=JSON.parse(this.responseText);for(let e=0;e<t.items.length;e++)"level_01"!=t.items[e].type&&"level_02"!=t.items[e].type||$("#browsers").append("<option value='"+t.items[e].tag_info+"'>")},e.open("GET","build_setting.json",!0),e.send();const t=new XMLHttpRequest;t.onload=function(){var t=JSON.parse(this.responseText);for(let e=0;e<t.machines.length;e++)$("#browsers").append("<option value='"+t.machines[e].tag_info+"'>")},t.open("GET","machines_tmp.json",!0),t.send()}function TopBarInit(){var e=document.getElementById("chartRackSpace").getContext("2d");chartRackSpace=new Chart(e,{type:"doughnut",data:{labels:["已用電力","未用電力"],datasets:[{data:[5,5],backgroundColor:["rgba(0, 162, 232, 1)","rgba(142, 164, 178, 1)"],borderColor:["rgba(255, 255, 255 ,0)","rgba(255, 255, 255 ,0)"],borderWidth:2}]},options:{rotation:-90,circumference:180,cutout:39,plugins:{legend:{display:!1}},tooltip:{enabled:!1},cutoutPercentage:95}});e=document.getElementById("chartPower").getContext("2d");chartPower=new Chart(e,{type:"doughnut",data:{labels:["已用電力","未用電力"],datasets:[{data:[5,5],backgroundColor:["rgba(255, 127, 37, 1)","rgba(142, 164, 178, 1)"],borderColor:["rgba(255, 255, 255 ,0)","rgba(255, 255, 255 ,0)"],borderWidth:2}]},options:{rotation:-90,circumference:180,cutout:39,plugins:{legend:{display:!1}},tooltip:{enabled:!1},cutoutPercentage:95}}),TopBarUpdate("http://132.145.121.108:8081/render/api/environmentSummary/all")}function OnChangeLocation(){TopBarUpdate("http://132.145.121.108:8081/render/api/environmentSummary/"+document.getElementById("nav-location").value)}function TopBarUpdate(e){$.ajax({url:e,dataType:"json",crossDomain:!0,contentType:"application/json",xhrFields:{withCredentials:!0}}).done(function(t){$("#nav-cabinet").html(t.numberCabinet),$("#nav-host").html(t.numberHost),$("#nav-net-device").html(t.numberNetworkDevice),$("#nav-storage").html(t.numberStorage),$("#nav-network").html(t.numberService),$("#alarm-status-critical").html(t.alarmStatusCritical),$("#alarm-status-warning").html(t.alarmStatusWarning),$("#alarm-status-normal").html(t.alarmStatusNormal),$("#nav-rack-space").html(t.totalRackSpace-t.usedRackSpace),$("#nav-rack-power").html(t.totalWattage-t.usedWattage),$(".top-number-ani").addClass("top-number-ani-play"),setTimeout(function(){$(".top-number-ani").removeClass("top-number-ani-play")},1e3),null!=chartRackSpace&&(chartRackSpace.data.datasets.forEach(e=>{e.data[0]=t.usedRackSpace,e.data[1]=t.totalRackSpace-t.usedRackSpace}),chartRackSpace.update()),null!=chartPower&&(chartPower.data.datasets.forEach(e=>{e.data[0]=t.usedWattage,e.data[1]=t.totalWattage-t.usedWattage}),chartPower.update())}).fail(function(e,t){console.log(e),console.log(t)})}function FullScreenInit(){document.querySelector("#fullScreen").addEventListener("click",Fullscreen),document.addEventListener("webkitfullscreenchange",FullscreenChange),document.addEventListener("mozfullscreenchange",FullscreenChange),document.addEventListener("fullscreenchange",FullscreenChange),document.addEventListener("MSFullscreenChange",FullscreenChange)}window.addEventListener("load",function(e){FullScreenInit(),TopBarInit(),SearchBoxInit()});let is_full_screen=!1;function Fullscreen(){var e;document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?(e=document.querySelector("body"),is_full_screen=is_full_screen?(console.log("eee"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),$("#fullScreen-bi").removeClass("bi-fullscreen-exit"),$("#fullScreen-bi").addClass("bi-arrows-fullscreen"),!1):(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),$("#fullScreen-bi").removeClass("bi-arrows-fullscreen"),$("#fullScreen-bi").addClass("bi-fullscreen-exit"),!0)):document.querySelector(".error").innerHTML="Your browser is not supported"}function FullscreenChange(){document.fullscreenEnabled||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}